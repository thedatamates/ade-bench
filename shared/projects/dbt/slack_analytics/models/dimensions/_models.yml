version: 2
models:
  - name: dim_slack_messages
    description: |
      This table contains one row per Slack message obtained from `stg_channel_messages`.
    columns:
      - name: message_id
        data_type: string
        description: Unique identifier for the message. Primary key.
        tests:
          - unique
          - not_null
      - name: user_id
        data_type: string
        description: The user ID of the person who sent the message.
      - name: channel_name
        data_type: string
        description: The name of the channel the message was sent in.
      - name: reply_count
        data_type: int
        description: The number of replies to the message.
      - name: reply_users_count
        data_type: int
        description: The number of users who replied to the message.
      - name: reply_users
        data_type: array<string>
        description: An array of the users who replied to the message.
      - name: reactions
        data_type: array<struct<name:string, users:array<string>, count:int>>
        description: An array of the reactions to the message including the reaction type and the user who reacted.
      - name: message_date
        data_type: date
        description: The date the message was sent.
      - name: message_datetime
        data_type: timestamp
        description: The date and time the message was sent.
      - name: extracted_at
        data_type: timestamp
        description: The date and time the message was extracted from the Slack API.