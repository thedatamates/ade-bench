task_id: quickbooks003
status: ready
description: Remove dbt variable and solve data issue
notes: |-
  Same as quickbooks002, but the error from quickbooks001 has not been fixed yet.
prompts:
  - key: base
    prompt: |-
      We are no longer using departments in our billing, so we should remove the using_department variable and all references to it. Do not remove it in the Fivetran source package.
author_name: test
author_email: test
difficulty: hard
category: jinja
tags:
  - data-hygiene
  - data-inspection
  - dbt
  - dbt-hygiene
  - dbt-packages
  - dbt-utils
  - jinja
  - model-refactor
  - dbt-project-configuration

# Test setup script to run before dbt tests
test_setup: |-
  dbt run

# Tables to compare for solution
solution_seeds:
  - table_name: int_quickbooks__refund_receipt_transactions
  - table_name: int_quickbooks__sales_receipt_transactions
  - table_name: int_quickbooks__invoice_double_entry
  - table_name: int_quickbooks__expenses_union
  - table_name: int_quickbooks__sales_union
  - table_name: quickbooks__ap_ar_enhanced
    exclude_columns:
    - source_relation
    - customer_vendor_address_line

# Variants for different database and project combinations
variants:
- db_type: duckdb
  db_name: quickbooks
  project_type: dbt
  project_name: quickbooks